{"ast":null,"code":"import { takeEvery, call, put, all } from \"redux-saga/effects\";\nimport history from \"../../routes/history\";\nimport { AUTH } from \"../types\";\nimport * as service from \"../services/userService\";\nimport * as actions from \"../actions/userActions\"; // import * as alert from \"../actions/alertActions\";\n\nfunction* login() {\n  try {\n    var _result$additionalUse;\n\n    const result = yield call(service.login);\n    const user = result.user;\n    yield put(actions.userLoggedIn(user)); // yield put(\n    // \talert.setAlertAction({\n    // \t\ttext: \"User Logged In!\",\n    // \t\tcolor: \"success\",\n    // \t})\n    // );\n\n    if (result === null || result === void 0 ? void 0 : (_result$additionalUse = result.additionalUserInfo) === null || _result$additionalUse === void 0 ? void 0 : _result$additionalUse.isNewUser) {\n      console.log(\"new user\");\n      console.log(history);\n      history.push(\"/signup\");\n    } else {\n      history.push(\"/\");\n    }\n  } catch (e) {\n    // yield put(\n    // \talert.setAlertAction({\n    // \t\ttext: e.msg,\n    // \t\tcolor: \"danger\",\n    // \t})\n    // );\n    console.log(e);\n  }\n}\n\nfunction* logout() {\n  yield call(service.logout);\n  yield put(actions.userLoggedOutAction());\n  history.push(\"/\");\n}\n\nfunction* watchLoginUser() {\n  yield takeEvery(AUTH.LOGIN_USER, login);\n}\n\nfunction* watchLogoutUser() {\n  yield takeEvery(AUTH.LOGOUT_USER, logout);\n}\n\nexport function* userSaga() {\n  yield all([watchLoginUser(), watchLogoutUser()]);\n}","map":{"version":3,"sources":["D:/Projects/Aucti/aucti-web/src/redux/saga/userSaga.js"],"names":["takeEvery","call","put","all","history","AUTH","service","actions","login","result","user","userLoggedIn","additionalUserInfo","isNewUser","console","log","push","e","logout","userLoggedOutAction","watchLoginUser","LOGIN_USER","watchLogoutUser","LOGOUT_USER","userSaga"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,GAA/B,QAA0C,oBAA1C;AAEA,OAAOC,OAAP,MAAoB,sBAApB;AAEA,SAASC,IAAT,QAAqB,UAArB;AACA,OAAO,KAAKC,OAAZ,MAAyB,yBAAzB;AACA,OAAO,KAAKC,OAAZ,MAAyB,wBAAzB,C,CACA;;AAEA,UAAUC,KAAV,GAAkB;AACjB,MAAI;AAAA;;AACH,UAAMC,MAAM,GAAG,MAAMR,IAAI,CAACK,OAAO,CAACE,KAAT,CAAzB;AACA,UAAME,IAAI,GAAGD,MAAM,CAACC,IAApB;AACA,UAAMR,GAAG,CAACK,OAAO,CAACI,YAAR,CAAqBD,IAArB,CAAD,CAAT,CAHG,CAIH;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAID,MAAJ,aAAIA,MAAJ,gDAAIA,MAAM,CAAEG,kBAAZ,0DAAI,sBAA4BC,SAAhC,EAA2C;AAC1CC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYX,OAAZ;AACAA,MAAAA,OAAO,CAACY,IAAR,CAAa,SAAb;AACA,KAJD,MAIO;AACNZ,MAAAA,OAAO,CAACY,IAAR,CAAa,GAAb;AACA;AACD,GAlBD,CAkBE,OAAOC,CAAP,EAAU;AACX;AACA;AACA;AACA;AACA;AACA;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYE,CAAZ;AACA;AACD;;AAED,UAAUC,MAAV,GAAmB;AAClB,QAAMjB,IAAI,CAACK,OAAO,CAACY,MAAT,CAAV;AACA,QAAMhB,GAAG,CAACK,OAAO,CAACY,mBAAR,EAAD,CAAT;AACAf,EAAAA,OAAO,CAACY,IAAR,CAAa,GAAb;AACA;;AAED,UAAUI,cAAV,GAA2B;AAC1B,QAAMpB,SAAS,CAACK,IAAI,CAACgB,UAAN,EAAkBb,KAAlB,CAAf;AACA;;AAED,UAAUc,eAAV,GAA4B;AAC3B,QAAMtB,SAAS,CAACK,IAAI,CAACkB,WAAN,EAAmBL,MAAnB,CAAf;AACA;;AAED,OAAO,UAAUM,QAAV,GAAqB;AAC3B,QAAMrB,GAAG,CAAC,CAACiB,cAAc,EAAf,EAAmBE,eAAe,EAAlC,CAAD,CAAT;AACA","sourcesContent":["import { takeEvery, call, put, all } from \"redux-saga/effects\";\r\n\r\nimport history from \"../../routes/history\";\r\n\r\nimport { AUTH } from \"../types\";\r\nimport * as service from \"../services/userService\";\r\nimport * as actions from \"../actions/userActions\";\r\n// import * as alert from \"../actions/alertActions\";\r\n\r\nfunction* login() {\r\n\ttry {\r\n\t\tconst result = yield call(service.login);\r\n\t\tconst user = result.user;\r\n\t\tyield put(actions.userLoggedIn(user));\r\n\t\t// yield put(\r\n\t\t// \talert.setAlertAction({\r\n\t\t// \t\ttext: \"User Logged In!\",\r\n\t\t// \t\tcolor: \"success\",\r\n\t\t// \t})\r\n\t\t// );\r\n\r\n\t\tif (result?.additionalUserInfo?.isNewUser) {\r\n\t\t\tconsole.log(\"new user\");\r\n\t\t\tconsole.log(history);\r\n\t\t\thistory.push(\"/signup\");\r\n\t\t} else {\r\n\t\t\thistory.push(\"/\");\r\n\t\t}\r\n\t} catch (e) {\r\n\t\t// yield put(\r\n\t\t// \talert.setAlertAction({\r\n\t\t// \t\ttext: e.msg,\r\n\t\t// \t\tcolor: \"danger\",\r\n\t\t// \t})\r\n\t\t// );\r\n\t\tconsole.log(e);\r\n\t}\r\n}\r\n\r\nfunction* logout() {\r\n\tyield call(service.logout);\r\n\tyield put(actions.userLoggedOutAction());\r\n\thistory.push(\"/\");\r\n}\r\n\r\nfunction* watchLoginUser() {\r\n\tyield takeEvery(AUTH.LOGIN_USER, login);\r\n}\r\n\r\nfunction* watchLogoutUser() {\r\n\tyield takeEvery(AUTH.LOGOUT_USER, logout);\r\n}\r\n\r\nexport function* userSaga() {\r\n\tyield all([watchLoginUser(), watchLogoutUser()]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}