{"ast":null,"code":"import { takeEvery, call, put, all } from \"redux-saga/effects\";\nimport history from \"../../routes/history\";\nimport { AUTH } from \"../types\";\nimport * as service from \"../services/userService\";\nimport * as actions from \"../actions/userActions\";\nimport * as alert from \"../actions/alertActions\";\n\nfunction* login({\n  role\n}) {\n  try {\n    const result = yield call(service.login, role);\n    const user = result.user;\n    yield put(actions.userLoggedIn(user));\n    yield put(alert.setAlertAction({\n      text: \"User Logged In!\",\n      text_color: \"text-blue-700\",\n      bg_color: \"bg-blue-100\"\n    }));\n    history.push(\"/\"); // if (result?.additionalUserInfo?.isNewUser) {\n    // \tconsole.log(\"new user\");\n    // \tconsole.log(history);\n    // \thistory.push(\"/register\");\n    // } else {\n    // \thistory.push(\"/\");\n    // }\n  } catch (e) {\n    yield put(alert.setAlertAction({\n      text: e.msg,\n      text_color: \"text-red-700\",\n      bg_color: \"bg-red-100\"\n    }));\n    console.log(e);\n  }\n}\n\nfunction* logout() {\n  yield call(service.logout);\n  yield put(actions.userLoggedOutAction());\n  history.push(\"/\");\n}\n\nfunction* watchLoginUser() {\n  yield takeEvery(AUTH.LOGIN_USER, login);\n}\n\nfunction* watchLogoutUser() {\n  yield takeEvery(AUTH.LOGOUT_USER, logout);\n}\n\nexport function* userSaga() {\n  yield all([watchLoginUser(), watchLogoutUser()]);\n}","map":{"version":3,"sources":["D:/Projects/Aucti/aucti-web/src/redux/saga/userSaga.js"],"names":["takeEvery","call","put","all","history","AUTH","service","actions","alert","login","role","result","user","userLoggedIn","setAlertAction","text","text_color","bg_color","push","e","msg","console","log","logout","userLoggedOutAction","watchLoginUser","LOGIN_USER","watchLogoutUser","LOGOUT_USER","userSaga"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,GAA/B,QAA0C,oBAA1C;AAEA,OAAOC,OAAP,MAAoB,sBAApB;AAEA,SAASC,IAAT,QAAqB,UAArB;AACA,OAAO,KAAKC,OAAZ,MAAyB,yBAAzB;AACA,OAAO,KAAKC,OAAZ,MAAyB,wBAAzB;AACA,OAAO,KAAKC,KAAZ,MAAuB,yBAAvB;;AAEA,UAAUC,KAAV,CAAgB;AAAEC,EAAAA;AAAF,CAAhB,EAA0B;AACzB,MAAI;AACH,UAAMC,MAAM,GAAG,MAAMV,IAAI,CAACK,OAAO,CAACG,KAAT,EAAgBC,IAAhB,CAAzB;AACA,UAAME,IAAI,GAAGD,MAAM,CAACC,IAApB;AACA,UAAMV,GAAG,CAACK,OAAO,CAACM,YAAR,CAAqBD,IAArB,CAAD,CAAT;AACA,UAAMV,GAAG,CACRM,KAAK,CAACM,cAAN,CAAqB;AACpBC,MAAAA,IAAI,EAAE,iBADc;AAEpBC,MAAAA,UAAU,EAAE,eAFQ;AAGpBC,MAAAA,QAAQ,EAAE;AAHU,KAArB,CADQ,CAAT;AAOAb,IAAAA,OAAO,CAACc,IAAR,CAAa,GAAb,EAXG,CAYH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAnBD,CAmBE,OAAOC,CAAP,EAAU;AACX,UAAMjB,GAAG,CACRM,KAAK,CAACM,cAAN,CAAqB;AACpBC,MAAAA,IAAI,EAAEI,CAAC,CAACC,GADY;AAEpBJ,MAAAA,UAAU,EAAE,cAFQ;AAGpBC,MAAAA,QAAQ,EAAE;AAHU,KAArB,CADQ,CAAT;AAOAI,IAAAA,OAAO,CAACC,GAAR,CAAYH,CAAZ;AACA;AACD;;AAED,UAAUI,MAAV,GAAmB;AAClB,QAAMtB,IAAI,CAACK,OAAO,CAACiB,MAAT,CAAV;AACA,QAAMrB,GAAG,CAACK,OAAO,CAACiB,mBAAR,EAAD,CAAT;AACApB,EAAAA,OAAO,CAACc,IAAR,CAAa,GAAb;AACA;;AAED,UAAUO,cAAV,GAA2B;AAC1B,QAAMzB,SAAS,CAACK,IAAI,CAACqB,UAAN,EAAkBjB,KAAlB,CAAf;AACA;;AAED,UAAUkB,eAAV,GAA4B;AAC3B,QAAM3B,SAAS,CAACK,IAAI,CAACuB,WAAN,EAAmBL,MAAnB,CAAf;AACA;;AAED,OAAO,UAAUM,QAAV,GAAqB;AAC3B,QAAM1B,GAAG,CAAC,CAACsB,cAAc,EAAf,EAAmBE,eAAe,EAAlC,CAAD,CAAT;AACA","sourcesContent":["import { takeEvery, call, put, all } from \"redux-saga/effects\";\r\n\r\nimport history from \"../../routes/history\";\r\n\r\nimport { AUTH } from \"../types\";\r\nimport * as service from \"../services/userService\";\r\nimport * as actions from \"../actions/userActions\";\r\nimport * as alert from \"../actions/alertActions\";\r\n\r\nfunction* login({ role }) {\r\n\ttry {\r\n\t\tconst result = yield call(service.login, role);\r\n\t\tconst user = result.user;\r\n\t\tyield put(actions.userLoggedIn(user));\r\n\t\tyield put(\r\n\t\t\talert.setAlertAction({\r\n\t\t\t\ttext: \"User Logged In!\",\r\n\t\t\t\ttext_color: \"text-blue-700\",\r\n\t\t\t\tbg_color: \"bg-blue-100\",\r\n\t\t\t})\r\n\t\t);\r\n\t\thistory.push(\"/\");\r\n\t\t// if (result?.additionalUserInfo?.isNewUser) {\r\n\t\t// \tconsole.log(\"new user\");\r\n\t\t// \tconsole.log(history);\r\n\t\t// \thistory.push(\"/register\");\r\n\t\t// } else {\r\n\t\t// \thistory.push(\"/\");\r\n\t\t// }\r\n\t} catch (e) {\r\n\t\tyield put(\r\n\t\t\talert.setAlertAction({\r\n\t\t\t\ttext: e.msg,\r\n\t\t\t\ttext_color: \"text-red-700\",\r\n\t\t\t\tbg_color: \"bg-red-100\",\r\n\t\t\t})\r\n\t\t);\r\n\t\tconsole.log(e);\r\n\t}\r\n}\r\n\r\nfunction* logout() {\r\n\tyield call(service.logout);\r\n\tyield put(actions.userLoggedOutAction());\r\n\thistory.push(\"/\");\r\n}\r\n\r\nfunction* watchLoginUser() {\r\n\tyield takeEvery(AUTH.LOGIN_USER, login);\r\n}\r\n\r\nfunction* watchLogoutUser() {\r\n\tyield takeEvery(AUTH.LOGOUT_USER, logout);\r\n}\r\n\r\nexport function* userSaga() {\r\n\tyield all([watchLoginUser(), watchLogoutUser()]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}